<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  {% assign document_title = site.title %}
  {% if page.title %}
    {% assign document_title = page.title %}
    {% if site.title and page.title != site.title %}
      {% assign document_title = page.title | append: ' | ' | append: site.title %}
    {% endif %}
  {% endif %}
  <title>{{ document_title | escape }}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  {% assign meta_description = page.description | default: site.description %}
  {% if meta_description %}
    <meta name="description" content="{{ meta_description | escape }}" />
  {% endif %}
  <link rel="stylesheet" href="{{ '/assets/css/main.css' | relative_url }}" />
  {% include google-analytics.html %}
  {% include supabase-config.html %}
</head>
<body{% if page.body_class %} class="{{ page.body_class }}"{% endif %}>
  {% assign current_path = page.path | default: '' %}
  <nav class="site-nav" aria-label="Primary">
    <ul class="site-nav__links">
      <li>
        <a href="{{ '/' | relative_url }}"{% if current_path == 'index.html' or current_path == '' %} aria-current="page"{% endif %}>Calc</a>
      </li>
      <li>
        <a href="{{ '/stats.html' | relative_url }}"{% if current_path == 'stats.html' %} aria-current="page"{% endif %}>Stats</a>
      </li>
      <li>
        <a href="{{ '/about.html' | relative_url }}"{% if current_path == 'about.html' %} aria-current="page"{% endif %}>About</a>
      </li>
    </ul>
  </nav>
  {{ content }}
  <script>
    (function () {
      try {
        if (window.self !== window.top) {
          document.documentElement.classList.add('is-embedded');
          if (document.body) {
            document.body.classList.add('is-embedded');
          } else {
            document.addEventListener('DOMContentLoaded', function () {
              document.body.classList.add('is-embedded');
            });
          }
        }
      } catch (error) {
        console.warn('Embed detection failed', error);
      }
    })();
  </script>
</body>
</html>
